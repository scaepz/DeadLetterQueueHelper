@using Azure.Messaging.ServiceBus

<MudContainer>
    <MudForm @onsubmit=Resubmit>
        <MudInputLabel for="messageBody">Body: </MudInputLabel>
        <MudTextField name="messageBody" @bind-Value="Body" Variant="Variant.Outlined" Lines="16" />
        <MudButton type="submit" Variant="Variant.Filled" Color="Color.Primary" @onclick="Resubmit">Resubmit</MudButton>
    </MudForm>
</MudContainer>
@code {
    [Parameter]
    public EditableAttemptProperties Original { get; set; } = null!;

    [Parameter]
    public IntegrationMessage Message { get; set; } = null!;

    [Inject]
    public IntegrationMessageService Service { get; set; } = null!;

    protected override void OnParametersSet()
    {
        Body = Original.Body.ToString();
    }

    public string Body { get; set; } = "";

    private async Task Resubmit()
    {
        var withValues = new EditableAttemptProperties(Body);
        await Service.Resubmit(Message, withValues);
    }
}
